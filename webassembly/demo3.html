<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>测试 kociemba算法</title>
</head>
<body>
<script>
    //emcc coordcube.c cubiecube.c facecube.c search.c prunetable_helpers.c -Iinclude solve.c -Os -s WASM=1 -s SIDE_MODULE=1 -o kociemba.wasm
    emcc demo2.c -s ONLY_MY_CODE=1 -s WASM=1 -s EXPORTED_FUNCTIONS="['_bezier1']"  -o demo2.js
    const memory = new WebAssembly.Memory({ initial: 256, maximum: 256 });
    const importObj = {
        env: {
            abortStackOverflow: () => { throw new Error('overflow'); },
            table: new WebAssembly.Table({ initial: 0, maximum: 0, element: 'anyfunc' }),
            tableBase: 0,
            memory: memory,
            memoryBase: 1024,
            STACKTOP: 0,
            STACK_MAX: memory.buffer.byteLength,
            ___errno_location:function(){},
            _access:function(){},
            _calloc:function(){},
            _fclose:function(){},
            _fopen:function(){},
            _fprintf:function(){}
        }
    };
    fetch('kociemba.wasm').then((response) => response.arrayBuffer())
            .then((bytes) => WebAssembly.instantiate(bytes, importObj))
            .then((wa) => {
                console.log(wa.instance.exports);
            });
</script>
</body>
</html>