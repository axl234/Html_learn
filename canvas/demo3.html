<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Canvas render Video</title>
</head>
<body>
	<canvas></canvas>
	<video preload="auto" x-webkit-airplay="true" webkit-playsinline="true" playsinline="true">
		<source src="../video/step1.mp4" type="video/mp4">
	</video>
	<script type="text/javascript">
		document.addEventListener('DOMContentLoaded',function(){

			window.requestAnimFrame = (function() {
				return window.requestAnimationFrame ||
						window.mozRequestAnimationFrame ||
						window.webkitRequestAnimationFrame ||
						window.msRequestAnimationFrame ||
						window.webkitRequestAnimationFrame;
			})();

			var width;
			var height;

			var video = document.querySelector('video');

			var canvas = document.querySelector('canvas');
			var context = canvas.getContext('2d');

			document.addEventListener('click',function(){
				initCanvas();
				video.play();
				video.style.display = 'none';
			},false);

			video.addEventListener('play',function(){
				drawVideo();
			},false);

			function drawVideo(){
				context.drawImage(video,0,0,width,height);
				window.requestAnimFrame(drawVideo);
			}
			function initCanvas(){
				var videoStyle = window.getComputedStyle(video);
				width = parseInt(videoStyle.width);
				height = parseInt(videoStyle.height);
				canvas.style.width = width+'px';
				canvas.style.height = height+'px';
				canvas.width = width;
				canvas.height = height;
			}
		},false);
	</script>
</body>
</html>